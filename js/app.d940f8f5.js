(function(){"use strict";var e={6489:function(e,t,r){var i=r(5130),s=(r(8111),r(2489),r(6768)),n=r(4232);const a={class:"container mx-auto flex flex-col items-center bg-gray-100 p-4"},o={class:"container"},l={class:"rounded-md font-medium"},c=["disabled"],d=["disabled"],h={class:"mt-5 grid grid-cols-1 gap-5 sm:grid-cols-3"},p=["onClick"],u={class:"px-4 py-5 sm:p-6 text-center"},m={class:"text-sm font-medium text-gray-500 truncate"},g={class:"mt-1 text-3xl font-semibold text-gray-900"},f=["onClick"];function k(e,t,r,k,b,x){const v=(0,s.g2)("add-ticker-section"),y=(0,s.g2)("graph-section");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("div",o,[(0,s.bF)(v,{tickers:this.tickers,onAddTicker:t[0]||(t[0]=e=>x.add(e))},null,8,["tickers"]),this.tickers.length>0?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,s.Lk)("div",l,[t[5]||(t[5]=(0,s.eW)(" Найти: ")),(0,s.bo)((0,s.Lk)("input",{class:"rounded-lg","onUpdate:modelValue":t[1]||(t[1]=e=>b.filter=e)},null,512),[[i.Jo,b.filter]]),(0,s.Lk)("button",{class:"border-solid border-red-300 font-medium bg-gray-300 rounded-full py-2 px-5 m-2 hover:bg-gray-400 hover:text-white duration-150 disabled:bg-red-300 disabled:text-black",onClick:t[2]||(t[2]=e=>b.page-=1),disabled:1==b.page}," Назад ",8,c),(0,s.Lk)("button",{class:"border-solid border-red-300 font-medium bg-gray-300 rounded-full py-2 px-5 hover:bg-gray-400 hover:text-white duration-150 disabled:bg-red-300 disabled:text-black",onClick:t[3]||(t[3]=e=>b.page+=1),disabled:0==x.hasNextPage}," Вперед ",8,d)]),t[8]||(t[8]=(0,s.Lk)("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1)),(0,s.Lk)("dl",h,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(x.paginationTickers,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.name,onClick:t=>x.select(e),class:(0,n.C4)([{"border-4":b.selectedTicker===e,"bg-red-100":"NaN"==e.price,"bg-white":"NaN"!=e.price},"overflow-hidden shadow rounded-lg border-purple-800 border-solid cursor-pointer"])},[(0,s.Lk)("div",u,[(0,s.Lk)("dt",m,(0,n.v_)(e.name)+" - USDT ",1),(0,s.Lk)("dd",g,(0,n.v_)(e.price),1)]),t[7]||(t[7]=(0,s.Lk)("div",{class:"w-full border-t border-gray-200"},null,-1)),(0,s.Lk)("button",{onClick:(0,i.D$)((t=>x.deleteTicker(e)),["stop"]),class:"flex items-center justify-center font-medium w-full bg-gray-100 px-4 py-4 sm:px-6 text-md text-gray-500 duration-150 hover:text-black-500 hover:bg-gray-200 transition-all focus:outline-none"},t[6]||(t[6]=[(0,s.Lk)("svg",{class:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"#718096","aria-hidden":"true"},[(0,s.Lk)("path",{"fill-rule":"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z","clip-rule":"evenodd"})],-1),(0,s.eW)("Удалить ")]),8,f)],10,p)))),128))]),t[9]||(t[9]=(0,s.Lk)("hr",{class:"w-full border-t border-gray-600 my-4"},null,-1))],64)):(0,s.Q3)("",!0),(0,s.bF)(y,{ref:"graphSection",graph:b.graph,"selected-ticker":b.selectedTicker,"onUpdate:selectedTicker":t[4]||(t[4]=e=>b.selectedTicker=e),onUpdateMaxElements:x.handleMaxElementsUpdate,onTrimGraph:x.trimGraph},null,8,["graph","selected-ticker","onUpdateMaxElements","onTrimGraph"])])])}r(4114),r(116),r(7588),r(1701);const b=async e=>{const t=await fetch("https://api.binance.com/api/v3/exchangeInfo"),r=await t.json(),i=r.symbols.map((e=>e.symbol)),s=e.map((e=>`${e}USDT`)),n=s.filter((e=>i.includes(e)));let a=[];if(n.length>0){const e=`https://api.binance.com/api/v3/ticker/price?symbols=[${n.map((e=>`"${e}"`)).join(",")}]`,t=await fetch(e);a=await t.json()}const o=s.map((e=>{const t=a.find((t=>t.symbol===e));return t||{symbol:e,price:!1}}));return o},x={class:"flex"},v={class:"max-w-xs"},y={class:"mt-1 relative rounded-md shadow-md"},w={class:"flex bg-white shadow-md p-1 rounded-md shadow-md flex-wrap"},T={class:"text-sm text-red-600 mt-3"};function C(e,t,r,a,o,l){const c=(0,s.g2)("add-button");return(0,s.uX)(),(0,s.CE)("section",null,[(0,s.Lk)("div",x,[(0,s.Lk)("div",v,[t[7]||(t[7]=(0,s.Lk)("label",{for:"wallet",class:"block text-sm font-medium text-gray-700"},"Тикер",-1)),(0,s.Lk)("div",y,[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.ticker=e),onKeydown:t[1]||(t[1]=(0,i.jR)((e=>l.add(o.ticker)),["enter"])),type:"text",name:"wallet",id:"wallet",class:"block w-full pr-10 border-gray-300 text-gray-900 focus:outline-none focus:ring-gray-500 focus:border-gray-500 sm:text-sm rounded-md",placeholder:"Например DOGE"},null,544),[[i.Jo,o.ticker]])]),(0,s.Lk)("div",w,[(0,s.Lk)("span",{class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer hover:bg-gray-400 duration-150",onClick:t[2]||(t[2]=e=>l.add(o.ticker="BTC"))}," BTC "),(0,s.Lk)("span",{class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer hover:bg-gray-400 duration-150",onClick:t[3]||(t[3]=e=>l.add(o.ticker="DOGE"))}," DOGE "),(0,s.Lk)("span",{class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer hover:bg-gray-400 duration-150",onClick:t[4]||(t[4]=e=>l.add(o.ticker="BCH"))}," BCH "),(0,s.Lk)("span",{class:"inline-flex items-center px-2 m-1 rounded-md text-xs font-medium bg-gray-300 text-gray-800 cursor-pointer hover:bg-gray-400 duration-150",onClick:t[5]||(t[5]=e=>l.add(o.ticker="TON"))}," TON ")]),(0,s.Lk)("div",T,(0,n.v_)(o.errorMessage),1)])]),(0,s.bF)(c,{onClick:t[6]||(t[6]=e=>l.add(o.ticker))})])}const L={type:"button",class:"my-4 inline-flex items-center py-2 px-4 border border-transparent shadow-sm text-sm leading-4 font-medium rounded-full text-white bg-gray-600 hover:bg-gray-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"};function E(e,t){return(0,s.uX)(),(0,s.CE)("button",L,t[0]||(t[0]=[(0,s.Lk)("svg",{class:"-ml-0.5 mr-2 h-6 w-6",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24",fill:"#ffffff"},[(0,s.Lk)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})],-1),(0,s.eW)(" Добавить ")]))}var O=r(1241);const M={},G=(0,O.A)(M,[["render",E]]);var S=G,$={data(){return{ticker:"",errorMessage:""}},props:{tickers:{type:Array,required:!0,default:()=>[]}},emits:{"add-ticker":e=>"string"==typeof e},components:{AddButton:S},methods:{add(e){const t=e.toUpperCase();this.tickers.find((e=>e.name==t))?(this.errorMessage="Такой тикер уже добавлен",this.ticker=""):""==t?(this.errorMessage="Введите название криптовалюты",this.ticker=""):(this.errorMessage="",this.$emit("add-ticker",t),this.ticker="")}}};const U=(0,O.A)($,[["render",C]]);var j=U;const z={key:0,class:"relative"},I={class:"text-lg leading-6 font-medium text-gray-900 my-8"},N={class:"flex items-end border-gray-600 border-b border-l h-64",ref:"graph"},A={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:svgjs":"http://svgjs.com/svgjs",version:"1.1",width:"30",height:"30",x:"0",y:"0",viewBox:"0 0 511.76 511.76",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"};function D(e,t,r,i,a,o){return r.selectedTicker?((0,s.uX)(),(0,s.CE)("section",z,[(0,s.Lk)("h3",I,(0,n.v_)(r.selectedTicker.name)+" - USDT ",1),(0,s.Lk)("div",N,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(o.normalizedGraph,((e,t)=>((0,s.uX)(),(0,s.CE)("div",{key:t,style:(0,n.Tr)({height:`${e}%`}),class:"bg-purple-800 border w-10"},null,4)))),128))],512),(0,s.Lk)("button",{type:"button",class:"absolute top-0 right-0",onClick:t[0]||(t[0]=(...e)=>o.clearSection&&o.clearSection(...e))},[((0,s.uX)(),(0,s.CE)("svg",A,t[1]||(t[1]=[(0,s.Lk)("g",null,[(0,s.Lk)("path",{d:"M436.896,74.869c-99.84-99.819-262.208-99.819-362.048,0c-99.797,99.819-99.797,262.229,0,362.048    c49.92,49.899,115.477,74.837,181.035,74.837s131.093-24.939,181.013-74.837C536.715,337.099,536.715,174.688,436.896,74.869z     M361.461,331.317c8.341,8.341,8.341,21.824,0,30.165c-4.16,4.16-9.621,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    l-75.413-75.435l-75.392,75.413c-4.181,4.16-9.643,6.251-15.083,6.251c-5.461,0-10.923-2.091-15.083-6.251    c-8.341-8.341-8.341-21.845,0-30.165l75.392-75.413l-75.413-75.413c-8.341-8.341-8.341-21.845,0-30.165    c8.32-8.341,21.824-8.341,30.165,0l75.413,75.413l75.413-75.413c8.341-8.341,21.824-8.341,30.165,0    c8.341,8.32,8.341,21.824,0,30.165l-75.413,75.413L361.461,331.317z",fill:"#718096","data-original":"#000000"})],-1)])))])])):(0,s.Q3)("",!0)}var X={data(){return{maxGraphElements:1}},computed:{normalizedGraph(){const e=Math.max(...this.graph),t=Math.min(...this.graph);return e==t?this.graph.map((()=>50)):this.graph.map((r=>5+95*(r-t)/(e-t)))}},methods:{clearSection(){this.$emit("update:selected-ticker",null)},calculateMaxGraphElements(){this.$refs.graph&&(this.maxGraphElements=Math.floor(this.$refs.graph.clientWidth/38),this.$emit("update-max-elements",this.maxGraphElements))}},props:{graph:{type:Array,required:!0,Default:()=>[]},selectedTicker:{type:Object,Default:null}},watch:{selectedTicker(e){e||this.$emit("update:selected-ticker",null),this.$nextTick().then(this.calculateMaxGraphElements)},graph:{handler(e){e.length>this.maxGraphElements&&this.$emit("trim-graph",this.maxGraphElements)},deep:!0,immediate:!0}},mounted(){window.addEventListener("resize",this.calculateMaxGraphElements),this.resizeObserver=new ResizeObserver(this.calculateMaxGraphElements),this.$refs.graph&&this.resizeObserver.observe(this.$refs.graph)},beforeUnmount(){this.resizeObserver?.disconnect()},created(){this.calculateMaxGraphElements()}};const F=(0,O.A)(X,[["render",D]]);var B=F,P={data(){return{tickers:JSON.parse(localStorage.getItem("cryptonomicon-list"))||[],errorMessage:"",graph:[],selectedTicker:null,page:1,filter:""}},components:{AddTickerSection:j,GraphSection:B},computed:{startIndex(){return 6*(this.page-1)},endIndex(){return 6*this.page},filteredTickers(){return this.tickers.filter((e=>e.name.toUpperCase().includes(this.filter.toUpperCase())))},paginationTickers(){return this.filteredTickers.slice(this.startIndex,this.endIndex)},hasNextPage(){return this.filteredTickers.length>this.endIndex},pageStateOptions(){return{filter:this.filter,page:this.page}}},created(){const e=localStorage.getItem("cryptonomicon-list");e&&(this.tickers=JSON.parse(e)),setInterval(this.updateTickers,2e3);const t=Object.fromEntries(new URL(window.location).searchParams.entries());t.filter&&(this.filter=t.filter),t.page&&(this.page=Number(t.page))},methods:{trimGraph(e){this.graph.length>e&&(this.graph=this.graph.slice(-e))},handleMaxElementsUpdate(e){this.trimGraph(e)},formatPrice(e){return e>1?e.toFixed(2):e.toPrecision(2)},add(e){const t=e.toUpperCase();if(this.tickers.find((e=>e.name==t)))this.errorMessage="Такой тикер уже добавлен";else if(""==t)this.errorMessage="Введите название криптовалюты";else{this.errorMessage="";const e={name:t,price:"-"};this.tickers=[...this.tickers,e],this.ticker="",this.filter=""}},deleteTicker(e){this.tickers=this.tickers.filter((t=>t!=e)),localStorage.setItem("cryptonomicon-list",JSON.stringify(this.tickers)),this.selectedTicker==e&&(this.selectedTicker=null)},select(e){this.selectedTicker=e},async updateTickers(){if(!this.tickers.length)return;const e=await b(this.tickers.map((e=>e.name)));this.tickers.forEach((t=>{const r=e.find((e=>e.symbol===`${t.name}USDT`));if(r&&(t.price=parseFloat(r.price),t.price=this.formatPrice(t.price),t==this.selectedTicker)){this.graph.push(t.price);while(this.graph.length>this.maxGraphElements)this.graph.shift()}}))}},watch:{filter(){this.page=1},pageStateOptions(e){window.history.pushState(null,document.title,`${window.location.pathname}?filter=${e.filter}&page=${e.page}`)},paginationTickers(){0===this.paginationTickers.length&&this.page>1&&(this.page-=1)},selectedTicker(){this.graph=[]},tickers(){localStorage.setItem("cryptonomicon-list",JSON.stringify(this.tickers))}}};const J=(0,O.A)(P,[["render",k]]);var V=J;(0,i.Ef)(V).mount("#app")}},t={};function r(i){var s=t[i];if(void 0!==s)return s.exports;var n=t[i]={exports:{}};return e[i].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,i,s,n){if(!i){var a=1/0;for(d=0;d<e.length;d++){i=e[d][0],s=e[d][1],n=e[d][2];for(var o=!0,l=0;l<i.length;l++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](i[l])}))?i.splice(l--,1):(o=!1,n<a&&(a=n));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}n=n||0;for(var d=e.length;d>0&&e[d-1][2]>n;d--)e[d]=e[d-1];e[d]=[i,s,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};r.O.j=function(t){return 0===e[t]};var t=function(t,i){var s,n,a=i[0],o=i[1],l=i[2],c=0;if(a.some((function(t){return 0!==e[t]}))){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(l)var d=l(r)}for(t&&t(i);c<a.length;c++)n=a[c],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(d)},i=self["webpackChunkCryptonomicon"]=self["webpackChunkCryptonomicon"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=r.O(void 0,[504],(function(){return r(6489)}));i=r.O(i)})();
//# sourceMappingURL=app.d940f8f5.js.map